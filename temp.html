<style>
  #game {
    border: 1px solid black;
  }
  assets {
    display: none;
  }
</style>

<canvas id="game" width="800" height="1200"></canvas>

<assets>
  <img id="img-right-arrow" src="assets1/right_arrow.png" />
</assets>

<script src="Events.js"></script>
<script src="Canvas.js"></script>
<script src="DrawTimer.js"></script>
<script src="Coordinate.js"></script>
<script src="InputHandler.js"></script>
<script src="GestureHandler.js"></script>
<script src="Hexagon.js"></script>
<script src="Board.js"></script>

<script>
  const ASSETS = {
    RIGHT_ARROW: document.getElementById('img-right-arrow')
  };
  const FPS = 60;

  const canvas = new Canvas('game');
  
  const inputHandler = new InputHandler(canvas);
  const gestureHandler = new GestureHandler(canvas);
  
  const drawTimer = new DrawTimer(canvas, FPS);
  drawTimer.start();
  
  // Start drawing the board
  const board = new Board(canvas, new Coordinate(50, 20), 5, 30);
  board.createAll();
  
  // Generate a new board
  for (let i = 0; i < 60; i ++) {
    board.addRandom();
  }
  
  // Collapse
  let wrappedResult;
  
  let i = 0;
  function swipe() {
    if (i < 15) {
      console.log(wrappedResult.changed);
      board.updateWithResult(wrappedResult.result);
      dir = Math.floor(Math.random() * 6);
      wrappedResult = board.collapse(dir);
      
      i++;
      
      setTimeout(swipe, 1000);
    }
    
    return;
  };
  
  let dir = Math.floor(Math.random() * 6);
  wrappedResult = board.collapse(dir);
  setTimeout(swipe, 1000);
  
  // // Create a new board to show results
  // const collapsed = new Board(canvas, new Coordinate(50, 500), 5, 30);
  // collapsed.createAll();
  // collapsed.updateWithResult(wrappedResult.result);  // This is just for debugging
  
</script>